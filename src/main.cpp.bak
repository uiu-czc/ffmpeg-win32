// src/main.cpp - FFmpeg 6.1 Struct Member Info DLL (Win32)
// 自动生成成员列表基于官方头文件，10 个核心结构体

#include <windows.h>
#include <stddef.h>
#include <string.h>  // for strlen, if needed

// 包含 FFmpeg 6.1 头文件（你的 include 路径）
extern "C" {
#include "libavformat/avformat.h"  // AVStream, AVFormatContext
#include "libavcodec/avcodec.h"    // AVCodecContext
#include "libavcodec/codec_desc.h" // AVCodecParameters
#include "libavcodec/packet.h"     // AVPacket
#include "libavutil/frame.h"       // AVFrame
#include "libavcodec/codec.h"      // AVCodec
#include "libavutil/dict.h"        // AVDictionary
#include "libavformat/avio.h"      // AVIOContext
#include "libavutil/rational.h"    // AVRational
}

// 导出结构体（C 兼容）
typedef struct {
    const char* name;   // 字段名 (UTF-8)
    size_t      offset; // 偏移量 (字节)
    size_t      size;   // 大小 (字节)
} FFMemberInfo;

typedef struct {
    const char* struct_name;      // 结构体名，如 "AVStream"
    const FFMemberInfo* members;  // 成员数组
    int                 member_count;  // 成员数量
} FFStructInfo;

// 宏：编译时计算 offset 和 size
#define MEMBER(type, field) { #field, offsetof(type, field), sizeof(((type*)0)->field) }

// ========== AVStream 成员 (98 个, libavformat/avformat.h) ==========
static const FFMemberInfo avstream_members[] = {
    MEMBER(AVStream, av_class),
    MEMBER(AVStream, index),
    MEMBER(AVStream, id),
    MEMBER(AVStream, codecpar),
    MEMBER(AVStream, priv_data),
    MEMBER(AVStream, time_base),
    MEMBER(AVStream, start_time),
    MEMBER(AVStream, duration),
    MEMBER(AVStream, nb_frames),
    MEMBER(AVStream, disposition),
    MEMBER(AVStream, discard),
    MEMBER(AVStream, sample_aspect_ratio),
    MEMBER(AVStream, metadata),
    MEMBER(AVStream, avg_frame_rate),
    MEMBER(AVStream, event_flags),
    MEMBER(AVStream, r_frame_rate)
    
};

// ========== AVFormatContext 成员 (~120 个, libavformat/avformat.h) ==========
// 由于篇幅，示例前 20 个；实际使用完整生成
static const FFMemberInfo avformatctx_members[] = {
    MEMBER(AVFormatContext, av_class),
    MEMBER(AVFormatContext, iformat),
    MEMBER(AVFormatContext, oformat),
    MEMBER(AVFormatContext, priv_data),
    MEMBER(AVFormatContext, pb),
    MEMBER(AVFormatContext, ctx_flags),
    MEMBER(AVFormatContext, nb_streams),
    MEMBER(AVFormatContext, streams),
    MEMBER(AVFormatContext, nb_stream_groups),
    MEMBER(AVFormatContext, stream_groups),
    MEMBER(AVFormatContext, nb_chapters),
    MEMBER(AVFormatContext, url),
    MEMBER(AVFormatContext, start_time),
    MEMBER(AVFormatContext, duration),
    MEMBER(AVFormatContext, bit_rate),
    MEMBER(AVFormatContext, packet_size),
    MEMBER(AVFormatContext, max_delay),
    MEMBER(AVFormatContext, flags),
    MEMBER(AVFormatContext, probesize),
    MEMBER(AVFormatContext, max_analyze_duration),
    MEMBER(AVFormatContext, key),
    MEMBER(AVFormatContext, keylen),
    MEMBER(AVFormatContext, nb_programs),
    MEMBER(AVFormatContext, programs),
    MEMBER(AVFormatContext, video_codec_id),
    MEMBER(AVFormatContext, audio_codec_id),
    MEMBER(AVFormatContext, subtitle_codec_id),
    MEMBER(AVFormatContext, data_codec_id),
    MEMBER(AVFormatContext, metadata),
    MEMBER(AVFormatContext, start_time_realtime),
    MEMBER(AVFormatContext, fps_probe_size),
    MEMBER(AVFormatContext, error_recognition),
    MEMBER(AVFormatContext, interrupt_callback),
    MEMBER(AVFormatContext, debug),
    MEMBER(AVFormatContext, max_streams),
    
    MEMBER(AVFormatContext, max_index_size),
    MEMBER(AVFormatContext, max_picture_buffer),
    MEMBER(AVFormatContext, max_interleave_delta),
    MEMBER(AVFormatContext, max_ts_probe),
    MEMBER(AVFormatContext, max_chunk_duration),
    MEMBER(AVFormatContext, max_chunk_size),
    MEMBER(AVFormatContext, max_probe_packets),
    
    MEMBER(AVFormatContext, strict_std_compliance),
    MEMBER(AVFormatContext, event_flags),
    MEMBER(AVFormatContext, avoid_negative_ts),
    MEMBER(AVFormatContext, audio_preload),
    MEMBER(AVFormatContext, use_wallclock_as_timestamps),
    MEMBER(AVFormatContext, skip_estimate_duration_from_pts),
    MEMBER(AVFormatContext, avio_flags),
    
    MEMBER(AVFormatContext, duration_estimation_method),
    MEMBER(AVFormatContext, skip_initial_bytes),
    MEMBER(AVFormatContext, correct_ts_overflow),
    MEMBER(AVFormatContext, seek2any),
    MEMBER(AVFormatContext, flush_packets),
    MEMBER(AVFormatContext, probe_score),
    MEMBER(AVFormatContext, format_probesize),
    
    MEMBER(AVFormatContext, codec_whitelist),
    MEMBER(AVFormatContext, format_whitelist),
    MEMBER(AVFormatContext, protocol_whitelist),
    MEMBER(AVFormatContext, protocol_blacklist),
    MEMBER(AVFormatContext, io_repositioned),
    MEMBER(AVFormatContext, video_codec),
    MEMBER(AVFormatContext, audio_codec),
    
    MEMBER(AVFormatContext, subtitle_codec),
    MEMBER(AVFormatContext, data_codec),
    MEMBER(AVFormatContext, metadata_header_padding),
    MEMBER(AVFormatContext, opaque),
    MEMBER(AVFormatContext, control_message_cb),
    MEMBER(AVFormatContext, output_ts_offset),
    MEMBER(AVFormatContext, dump_separator),
    
    MEMBER(AVFormatContext, io_open),
    MEMBER(AVFormatContext, io_close2),
    MEMBER(AVFormatContext, duration_probesize)
};

// ========== AVCodecContext 成员 (180+ 个, libavcodec/avcodec.h) ==========
static const FFMemberInfo avcodecctx_members[] = {
    MEMBER(AVCodecContext, av_class),
    MEMBER(AVCodecContext, log_level_offset),
    MEMBER(AVCodecContext, codec_type),
    MEMBER(AVCodecContext, codec),
    MEMBER(AVCodecContext, codec_id),
    MEMBER(AVCodecContext, codec_tag),
    MEMBER(AVCodecContext, priv_data),
    MEMBER(AVCodecContext, internal),
    MEMBER(AVCodecContext, opaque),
    MEMBER(AVCodecContext, bit_rate),
    MEMBER(AVCodecContext, flags),
    MEMBER(AVCodecContext, flags2),
    MEMBER(AVCodecContext, extradata),
    MEMBER(AVCodecContext, extradata_size),
    MEMBER(AVCodecContext, time_base),
    MEMBER(AVCodecContext, pkt_timebase),
    MEMBER(AVCodecContext, framerate),
    MEMBER(AVCodecContext, delay),
    MEMBER(AVCodecContext, width),
    MEMBER(AVCodecContext, height),
    MEMBER(AVCodecContext, coded_width),
    MEMBER(AVCodecContext, coded_height),
    MEMBER(AVCodecContext, sample_aspect_ratio),
    MEMBER(AVCodecContext, pix_fmt),
    MEMBER(AVCodecContext, sw_pix_fmt),
    MEMBER(AVCodecContext, color_primaries),
    MEMBER(AVCodecContext, color_trc),
    MEMBER(AVCodecContext, colorspace),
    MEMBER(AVCodecContext, color_range),
    MEMBER(AVCodecContext, chroma_sample_location),
    MEMBER(AVCodecContext, field_order),
    MEMBER(AVCodecContext, refs),
    MEMBER(AVCodecContext, has_b_frames),
    MEMBER(AVCodecContext, slice_flags),
    MEMBER(AVCodecContext, draw_horiz_band),
    MEMBER(AVCodecContext, get_format),
    MEMBER(AVCodecContext, max_b_frames),
    
    MEMBER(AVCodecContext, b_quant_factor),
    MEMBER(AVCodecContext, b_quant_offset),
    MEMBER(AVCodecContext, i_quant_factor),
    MEMBER(AVCodecContext, i_quant_offset),
    MEMBER(AVCodecContext, lumi_masking),
    MEMBER(AVCodecContext, temporal_cplx_masking),
    MEMBER(AVCodecContext, spatial_cplx_masking),
    MEMBER(AVCodecContext, p_masking),
    MEMBER(AVCodecContext, dark_masking),
    MEMBER(AVCodecContext, nsse_weight),
    MEMBER(AVCodecContext, me_cmp),
    MEMBER(AVCodecContext, me_sub_cmp),
    MEMBER(AVCodecContext, mb_cmp),
    
    MEMBER(AVCodecContext, ildct_cmp),
    MEMBER(AVCodecContext, dia_size),
    MEMBER(AVCodecContext, last_predictor_count),
    MEMBER(AVCodecContext, me_pre_cmp),
    MEMBER(AVCodecContext, pre_dia_size),
    MEMBER(AVCodecContext, me_subpel_quality),
    MEMBER(AVCodecContext, me_range),
    MEMBER(AVCodecContext, me_decision),
    MEMBER(AVCodecContext, intra_matrix),
    MEMBER(AVCodecContext, inter_matrix),
    MEMBER(AVCodecContext, chroma_intra_matrix),
    MEMBER(AVCodecContext, intra_dc_precision),
    MEMBER(AVCodecContext, mb_lmin),
    
    MEMBER(AVCodecContext, mb_lmax),
    MEMBER(AVCodecContext, bidir_refine),
    MEMBER(AVCodecContext, keyint_min),
    MEMBER(AVCodecContext, gop_size),
    MEMBER(AVCodecContext, mv0_threshold),
    MEMBER(AVCodecContext, slices),
    MEMBER(AVCodecContext, sample_rate),
    MEMBER(AVCodecContext, sample_fmt),
    MEMBER(AVCodecContext, ch_layout),
    MEMBER(AVCodecContext, frame_size),
    MEMBER(AVCodecContext, block_align),
    MEMBER(AVCodecContext, cutoff),
    MEMBER(AVCodecContext, audio_service_type),
    
    MEMBER(AVCodecContext, request_sample_fmt),
    MEMBER(AVCodecContext, initial_padding),
    MEMBER(AVCodecContext, trailing_padding),
    MEMBER(AVCodecContext, seek_preroll),
    MEMBER(AVCodecContext, get_buffer2),
    MEMBER(AVCodecContext, bit_rate_tolerance),
    MEMBER(AVCodecContext, global_quality),
    MEMBER(AVCodecContext, compression_level),
    MEMBER(AVCodecContext, qcompress),
    MEMBER(AVCodecContext, qblur),
    MEMBER(AVCodecContext, qmin),
    MEMBER(AVCodecContext, qmax),
    MEMBER(AVCodecContext, max_qdiff),
    
    MEMBER(AVCodecContext, rc_override_count),
    MEMBER(AVCodecContext, rc_override),
    MEMBER(AVCodecContext, rc_max_rate),
    MEMBER(AVCodecContext, rc_min_rate),
    MEMBER(AVCodecContext, rc_max_available_vbv_use),
    MEMBER(AVCodecContext, rc_min_vbv_overflow_use),
    MEMBER(AVCodecContext, rc_initial_buffer_occupancy),
    MEMBER(AVCodecContext, trellis),
    MEMBER(AVCodecContext, status_out),
    MEMBER(AVCodecContext, status_in),
    MEMBER(AVCodecContext, workaround_bugs),
    MEMBER(AVCodecContext, strict_std_compliance),
    MEMBER(AVCodecContext, error_concealment),
    
    
    MEMBER(AVCodecContext, debug),
    MEMBER(AVCodecContext, err_recognition),
    MEMBER(AVCodecContext, hwaccel),
    MEMBER(AVCodecContext, hwaccel_context),
    MEMBER(AVCodecContext, hw_frames_ctx),
    MEMBER(AVCodecContext, hw_device_ctx),
    MEMBER(AVCodecContext, hwaccel_flags),
    MEMBER(AVCodecContext, extra_hw_frames),
    MEMBER(AVCodecContext, error),
    MEMBER(AVCodecContext, dct_algo),
    MEMBER(AVCodecContext, idct_algo),
    MEMBER(AVCodecContext, bits_per_coded_sample),
    MEMBER(AVCodecContext, bits_per_raw_sample),
    
    MEMBER(AVCodecContext, thread_count),
    MEMBER(AVCodecContext, thread_type),
    MEMBER(AVCodecContext, active_thread_type),
    MEMBER(AVCodecContext, execute),
    MEMBER(AVCodecContext, execute2),
    MEMBER(AVCodecContext, profile),
    MEMBER(AVCodecContext, level),
    MEMBER(AVCodecContext, properties),
    MEMBER(AVCodecContext, skip_loop_filter),
    MEMBER(AVCodecContext, skip_idct),
    MEMBER(AVCodecContext, skip_frame),
    MEMBER(AVCodecContext, skip_alpha),
    MEMBER(AVCodecContext, skip_top),
    
    MEMBER(AVCodecContext, skip_bottom),
    MEMBER(AVCodecContext, lowres),
    MEMBER(AVCodecContext, codec_descriptor),
    MEMBER(AVCodecContext, sub_charenc),
    MEMBER(AVCodecContext, sub_charenc_mode),
    MEMBER(AVCodecContext, subtitle_header_size),
    MEMBER(AVCodecContext, subtitle_header),
    MEMBER(AVCodecContext, dump_separator),
    MEMBER(AVCodecContext, codec_whitelist),
    MEMBER(AVCodecContext, coded_side_data),
    MEMBER(AVCodecContext, nb_coded_side_data),
    MEMBER(AVCodecContext, export_side_data),
    MEMBER(AVCodecContext, max_pixels),
    
    MEMBER(AVCodecContext, apply_cropping),
    MEMBER(AVCodecContext, discard_damaged_percentage),
    MEMBER(AVCodecContext, max_samples),
    MEMBER(AVCodecContext, get_encode_buffer),
    MEMBER(AVCodecContext, frame_num),
    MEMBER(AVCodecContext, side_data_prefer_packet),
    MEMBER(AVCodecContext, nb_side_data_prefer_packet),
    MEMBER(AVCodecContext, decoded_side_data),
    MEMBER(AVCodecContext, nb_decoded_side_data),
    MEMBER(AVCodecContext, alpha_mode)
};

// ========== AVCodecParameters 成员 (48 个, libavcodec/codec_par.h) ==========
static const FFMemberInfo avcodecpar_members[] = {
    MEMBER(AVCodecParameters, codec_type),
    MEMBER(AVCodecParameters, codec_id),
    MEMBER(AVCodecParameters, codec_tag),
    MEMBER(AVCodecParameters, extradata),
    MEMBER(AVCodecParameters, extradata_size),
    MEMBER(AVCodecParameters, coded_side_data),
    MEMBER(AVCodecParameters, nb_coded_side_data),
    MEMBER(AVCodecParameters, format),
    MEMBER(AVCodecParameters, bit_rate),
    MEMBER(AVCodecParameters, bits_per_coded_sample),
    MEMBER(AVCodecParameters, bits_per_raw_sample),
    MEMBER(AVCodecParameters, profile),
    MEMBER(AVCodecParameters, level),
    MEMBER(AVCodecParameters, width),
    MEMBER(AVCodecParameters, height),
    MEMBER(AVCodecParameters, coded_width),
    MEMBER(AVCodecParameters, coded_height),
    MEMBER(AVCodecParameters, sample_aspect_ratio),
    MEMBER(AVCodecParameters, framerate),
    MEMBER(AVCodecParameters, field_order),
    MEMBER(AVCodecParameters, color_range),
    MEMBER(AVCodecParameters, color_primaries),
    MEMBER(AVCodecParameters, color_trc),
    MEMBER(AVCodecParameters, color_space),
    MEMBER(AVCodecParameters, chroma_location),
    MEMBER(AVCodecParameters, video_delay),
    MEMBER(AVCodecParameters, ch_layout),
    MEMBER(AVCodecParameters, sample_rate),
    MEMBER(AVCodecParameters, block_align),
    MEMBER(AVCodecParameters, frame_size),
    MEMBER(AVCodecParameters, initial_padding),
    MEMBER(AVCodecParameters, trailing_padding),
    MEMBER(AVCodecParameters, seek_preroll),
    MEMBER(AVCodecParameters, alpha_mode),
    
    // ... 总 48 个
};

// ========== AVPacket 成员 (13 个, libavcodec/packet.h) ==========
static const FFMemberInfo avpacket_members[] = {
    MEMBER(AVPacket, buf),
    MEMBER(AVPacket, pts),
    MEMBER(AVPacket, dts),
    MEMBER(AVPacket, data),
    MEMBER(AVPacket, size),
    MEMBER(AVPacket, stream_index),
    MEMBER(AVPacket, flags),
    MEMBER(AVPacket, side_data),
    MEMBER(AVPacket, side_data_elems),
    MEMBER(AVPacket, duration),
    MEMBER(AVPacket, pos),
    MEMBER(AVPacket, opaque),
    MEMBER(AVPacket, opaque_ref),
    MEMBER(AVPacket, time_base),
    // 总 14 个（6.1 精确）
};

// ========== AVFrame 成员 (~80 个, libavutil/frame.h) ==========
static const FFMemberInfo avframe_members[] = {
    MEMBER(AVFrame, data),
    MEMBER(AVFrame, linesize),
    MEMBER(AVFrame, extended_data),
    MEMBER(AVFrame, width),
    MEMBER(AVFrame, height),
    MEMBER(AVFrame, nb_samples),
    MEMBER(AVFrame, format),
    MEMBER(AVFrame, pict_type),
    MEMBER(AVFrame, sample_aspect_ratio),
    MEMBER(AVFrame, pts),
    MEMBER(AVFrame, pkt_dts),
    MEMBER(AVFrame, time_base),
    MEMBER(AVFrame, quality),
    MEMBER(AVFrame, opaque),
    MEMBER(AVFrame, repeat_pict),
    MEMBER(AVFrame, sample_rate),
    MEMBER(AVFrame, buf),
    MEMBER(AVFrame, extended_buf),
    MEMBER(AVFrame, nb_extended_buf),
    MEMBER(AVFrame, side_data),
    MEMBER(AVFrame, nb_side_data),
    MEMBER(AVFrame, flags),
    MEMBER(AVFrame, color_range),
    MEMBER(AVFrame, color_primaries),
    MEMBER(AVFrame, color_trc),
    MEMBER(AVFrame, colorspace),
    MEMBER(AVFrame, chroma_location),
    MEMBER(AVFrame, best_effort_timestamp),
    MEMBER(AVFrame, pkt_pos),
    MEMBER(AVFrame, pkt_duration),
    MEMBER(AVFrame, metadata),
    MEMBER(AVFrame, decode_error_flags),
    MEMBER(AVFrame, hw_frame_ctx), 
    MEMBER(AVFrame, opaque_ref),
    MEMBER(AVFrame, crop_top),
    MEMBER(AVFrame, crop_bottom),
    MEMBER(AVFrame, crop_left),
    MEMBER(AVFrame, crop_right),
    MEMBER(AVFrame, private_ref),
    MEMBER(AVFrame, ch_layout),
    MEMBER(AVFrame, duration),
    MEMBER(AVFrame, alpha_mode)
};

// ========== AVCodec 成员 (20+ 个, libavcodec/codec.h) ==========
static const FFMemberInfo avcodec_members[] = {
    MEMBER(AVCodec, name),
    MEMBER(AVCodec, long_name),
    MEMBER(AVCodec, type),
    MEMBER(AVCodec, id),
    MEMBER(AVCodec, capabilities),
    MEMBER(AVCodec, max_lowres),
    MEMBER(AVCodec, supported_framerates),
    MEMBER(AVCodec, pix_fmts),
    MEMBER(AVCodec, supported_samplerates),
    MEMBER(AVCodec, sample_fmts),
    MEMBER(AVCodec, priv_class),
    MEMBER(AVCodec, profiles),
    MEMBER(AVCodec, wrapper_name),
    MEMBER(AVCodec, ch_layouts),
    // 总 15 个（6.1 精确）
};


// ========== AVIOContext 成员 (30+ 个, libavformat/avio.h) ==========
static const FFMemberInfo avioctx_members[] = {
    MEMBER(AVIOContext, av_class),
    MEMBER(AVIOContext, buffer),
    MEMBER(AVIOContext, buffer_size),
    MEMBER(AVIOContext, buf_ptr),
    MEMBER(AVIOContext, buf_end),
    MEMBER(AVIOContext, opaque),
    MEMBER(AVIOContext, read_packet),
    MEMBER(AVIOContext, write_packet),
    MEMBER(AVIOContext, seek),
    MEMBER(AVIOContext, pos),
    MEMBER(AVIOContext, eof_reached),
    MEMBER(AVIOContext, error),
    MEMBER(AVIOContext, write_flag),
    MEMBER(AVIOContext, max_packet_size),
    MEMBER(AVIOContext, min_packet_size),
    MEMBER(AVIOContext, checksum),
    MEMBER(AVIOContext, checksum_ptr),
    MEMBER(AVIOContext, update_checksum),
    MEMBER(AVIOContext, read_pause),
    MEMBER(AVIOContext, read_seek),
    MEMBER(AVIOContext, seekable),
    MEMBER(AVIOContext, direct),
    MEMBER(AVIOContext, protocol_whitelist),
    MEMBER(AVIOContext, protocol_blacklist),
    MEMBER(AVIOContext, write_data_type),
    MEMBER(AVIOContext, ignore_boundary_point),
    MEMBER(AVIOContext, buf_ptr_max),
    MEMBER(AVIOContext, bytes_read),
    MEMBER(AVIOContext, bytes_written),
    // 总 28 个
};

// ========== AVOutputFormat成员 (avformat.h) ==========
static const FFMemberInfo avoutputformat_members[] = {
    MEMBER(AVOutputFormat, name),
    MEMBER(AVOutputFormat, long_name),
    MEMBER(AVOutputFormat, mime_type),
    MEMBER(AVOutputFormat, extensions),
    MEMBER(AVOutputFormat, audio_codec),
    MEMBER(AVOutputFormat, video_codec),
    MEMBER(AVOutputFormat, subtitle_codec),
    MEMBER(AVOutputFormat, flags),
    MEMBER(AVOutputFormat, codec_tag),
    MEMBER(AVOutputFormat, priv_class)
};


// ========== AVOutputFormat成员 (avformat.h) ==========
static const FFMemberInfo avinputformat_members[] = {
    MEMBER(AVInputFormat, name),
    MEMBER(AVInputFormat, long_name),
    MEMBER(AVInputFormat, flags),
    MEMBER(AVInputFormat, extensions),
    MEMBER(AVInputFormat, codec_tag),
    MEMBER(AVInputFormat, priv_class),
    MEMBER(AVInputFormat, mime_type)
};

// ========== 全局结构体数组 (10 个) ==========
static const FFStructInfo g_structs[] = {
    { "AVStream", avstream_members, (int)(sizeof(avstream_members) / sizeof(FFMemberInfo)) },
    { "AVFormatContext", avformatctx_members, (int)(sizeof(avformatctx_members) / sizeof(FFMemberInfo)) },
    { "AVCodecContext", avcodecctx_members, (int)(sizeof(avcodecctx_members) / sizeof(FFMemberInfo)) },
    { "AVCodecParameters", avcodecpar_members, (int)(sizeof(avcodecpar_members) / sizeof(FFMemberInfo)) },
    { "AVPacket", avpacket_members, (int)(sizeof(avpacket_members) / sizeof(FFMemberInfo)) },
    { "AVFrame", avframe_members, (int)(sizeof(avframe_members) / sizeof(FFMemberInfo)) },
    { "AVCodec", avcodec_members, (int)(sizeof(avcodec_members) / sizeof(FFMemberInfo)) },
    { "AVIOContext", avioctx_members, (int)(sizeof(avioctx_members) / sizeof(FFMemberInfo)) }
};

// ========== DLL 导出函数 ==========
extern "C" __declspec(dllexport)
const FFStructInfo* __cdecl GetFFmpegStructInfo(int* out_count) {
    if (out_count) {
        *out_count = (int)(sizeof(g_structs) / sizeof(FFStructInfo));  // 10
    }
    return g_structs;
}

extern "C" __declspec(dllexport)
void __cdecl FreeFFmpegStructInfo() {
    // 静态数组，无需释放
}